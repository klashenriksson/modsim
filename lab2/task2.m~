mu = 0.8;
beta = 0.001;
x0 = [900;100];
tot_pop = sum(x0);
t_start = 0;
t_end = 100;

x = stoch_sim(x0,mu,beta,t_start,t_end,0.02);
plot

function x = stoch_sim(x0,mu,beta, t_start, t_end, dt)
    max_iters = (t_end-t_start)/dt;
    
    x = zeros(2,max_iters);
    x(1) = x0;
    for iter = 2:max_iters
        k_i_to_s = mu*dt;
        k_s_to_i = 1- (1-beta*dt).^x(2,iter-1);
        
        x(iter) = x(iter-1);
        
        n_infected = x(2,iter);
        n_susept = x(1,iter);
        for i = 1:n_infected
            r = rand();
            if r < k_i_to_s
                x(2,iter) = x(2,iter) - 1;
                x(1,iter) = x(1,iter) + 1;
            end
        end
        
        for i = 1:n_susept
            r = rand();
            if r < k_s_to_i
                x(1,iter) = x(1,iter) + 1;
                x(2,iter) = x(2,iter) - 1;
            end
        end
          
    end

end